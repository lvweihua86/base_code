<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hivescm.code.mapper.CodeIdMapper">
    <resultMap id="BaseResultMap" type="com.hivescm.code.dto.CodeRule">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="rule_code" jdbcType="VARCHAR" property="ruleCode"/>
        <result column="rule_name" jdbcType="VARCHAR" property="ruleName"/>
        <result column="business_code" jdbcType="VARCHAR" property="businessCode"/>
        <result column="code_type" jdbcType="TINYINT" property="codeType"/>
        <result column="is_break_code" jdbcType="TINYINT" property="isBreakCode"/>
        <result column="zero_reason" jdbcType="TINYINT" property="zeroReason"/>
        <result column="org_id" jdbcType="VARCHAR" property="orgId"/>
        <result column="time_format" jdbcType="VARCHAR" property="timeFormat"/>
        <result column="is_default" jdbcType="TINYINT" property="isDefault"/>
        <result column="is_edit" jdbcType="TINYINT" property="isEdit"/>
        <result column="is_use" jdbcType="TINYINT" property="isUse"/>
        <result column="is_flow" jdbcType="TINYINT" property="isFlow"/>
        <result column="sum_longth" jdbcType="INTEGER" property="sumLongth"/>
    </resultMap>

    <sql id="Base_Column_List">
    id, rule_code, rule_name, business_code, code_type, is_break_code, zero_reason,
    org_id, is_use, time_format, is_default, is_edit, is_flow, sum_longth
  </sql>

  <select id="getAllUsedCodeIds" resultMap="BaseResultMap">
        SELECT
          <include refid="Base_Column_List"/>
        FROM
          base_code_id where is_use=1
  </select>

  <select id="getzeroreasonByCodeId" resultType="int">
      SELECT
        zero_reason
      FROM
        base_code_id WHERE org_id=#{0} AND id=#{1} AND is_use=1
  </select>
    <select id="getTimeFormatStr" resultType="string">
      SELECT
        time_format
      FROM
        base_code_id WHERE id=#{0} AND is_use=1
  </select>

  <select id="getDefaultCodeIdByBusinessID" resultMap="BaseResultMap">
     SELECT
        <include refid="Base_Column_List"/>
     FROM
        base_code_id 
     WHERE business_code=#{0} AND is_default=1
  </select>

  <select id="getCodeIdByBusinessIDAndOrgId" resultMap="BaseResultMap">
     SELECT
        <include refid="Base_Column_List"/>
     FROM
        base_code_id 
     WHERE org_id=#{0} AND business_code=#{1} AND is_use=1
  </select>

  <select id="getAllCodeID" resultMap="BaseResultMap">
        select
           <include refid="Base_Column_List"/>
        from
           base_code_id
  </select>

  <select id="selectByPrimaryKey" parameterType="java.lang.Long"
            resultMap="BaseResultMap">
        select
           <include refid="Base_Column_List"/>
        from
           base_code_id
        where
           id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from
      base_code_id
    where
      id = #{id,jdbcType=BIGINT}
  </delete>
    <insert id="insert" parameterType="com.hivescm.code.pojo.CodeId">
    insert into base_code_id (id, rule_code, rule_name, 
      business_code, code_type, is_break_code,
      zero_reason, org_id, is_default, 
      is_edit, is_flow,sum_longth
      )
    values (#{id,jdbcType=BIGINT}, #{ruleCode,jdbcType=VARCHAR}, #{ruleName,jdbcType=VARCHAR}, 
      #{businessCode,jdbcType=INTEGER}, #{codeType,jdbcType=BIT},
      #{isBreakCode,jdbcType=BIT}, #{zeroReason,jdbcType=BIT},
      #{orgId,jdbcType=VARCHAR}, #{isDefault,jdbcType=BIT},
      #{isEdit,jdbcType=BIT}, #{isFlow,jdbcType=BIT}, #{sumLongth,jdbcType=INTEGER}
      )
  </insert>
    <insert id="insertSelective" parameterType="com.hivescm.code.pojo.CodeId">
        insert into base_code_id
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="ruleCode != null">
                rule_code,
            </if>
            <if test="ruleName != null">
                rule_name,
            </if>
            <if test="businessCode != null">
                business_code,
            </if>
            <if test="codeType != null">
                code_type,
            </if>
            <if test="isBreakCode != null">
                is_break_code,
            </if>
            <if test="zeroReason != null">
                zero_reason,
            </if>
            <if test="orgId != null">
                org_id,
            </if>
            <if test="isDefault != null">
                is_default,
            </if>
            <if test="isEdit != null">
                is_edit,
            </if>
            <if test="isFlow != null">
                is_flow,
            </if>
            <if test="sumLongth != null">
                sum_longth
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="ruleCode != null">
                #{ruleCode,jdbcType=VARCHAR},
            </if>
            <if test="ruleName != null">
                #{ruleName,jdbcType=VARCHAR},
            </if>
            <if test="businessCode != null">
                #{businessCode,jdbcType=INTEGER},
            </if>
            <if test="codeType != null">
                #{codeType,jdbcType=BIT},
            </if>
            <if test="isBreakCode != null">
                #{isBreakCode,jdbcType=BIT},
            </if>
            <if test="zeroReason != null">
                #{zeroReason,jdbcType=BIT},
            </if>
            <if test="orgId != null">
                #{orgId,jdbcType=VARCHAR},
            </if>
            <if test="isDefault != null">
                #{isDefault,jdbcType=BIT},
            </if>
            <if test="isEdit != null">
                #{isEdit,jdbcType=BIT},
            </if>
            <if test="isFlow != null">
                #{isFlow,jdbcType=BIT},
            </if>
            <if test="sumLongth != null">
                #{sumLongth,jdbcType=INTEGER}
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective"
            parameterType="com.hivescm.code.pojo.CodeId">
        update base_code_id
        <set>
            <if test="ruleCode != null">
                rule_code = #{ruleCode,jdbcType=VARCHAR},
            </if>
            <if test="ruleName != null">
                rule_name = #{ruleName,jdbcType=VARCHAR},
            </if>
            <if test="businessCode != null">
                business_code = #{businessCodejdbcType=INTEGER},
            </if>
            <if test="codeType != null">
                code_type = #{codeType,jdbcType=BIT},
            </if>
            <if test="isBreakCode != null">
                is_break_code = #{isBreakCode,jdbcType=BIT},
            </if>
            <if test="zeroReason != null">
                zero_reason = #{zeroReason,jdbcType=BIT},
            </if>
            <if test="orgId != null">
                org_id = #{orgId,jdbcType=VARCHAR},
            </if>
            <if test="isDefault != null">
                is_default = #{isDefault,jdbcType=BIT},
            </if>
            <if test="isEdit != null">
                is_edit = #{isEdit,jdbcType=BIT},
            </if>
            <if test="isFlow != null">
                is_flow = #{isFlow,jdbcType=BIT},
            </if>
            <if test="sumLongth != null">
                sum_longth = #{sumLongth,jdbcType=INTEGER}
            </if>
        </set>
        where id = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.hivescm.code.pojo.CodeId">
    update base_code_id
    set rule_code = #{ruleCode,jdbcType=VARCHAR},
      rule_name = #{ruleName,jdbcType=VARCHAR},
      business_code = #{businessCode,jdbcType=INTEGER},
      code_type = #{codeType,jdbcType=BIT},
      is_break_code = #{isBreakCode,jdbcType=BIT},
      zero_reason = #{zeroReason,jdbcType=BIT},
      org_id = #{orgId,jdbcType=VARCHAR},
      is_default = #{isDefault,jdbcType=BIT},
      is_edit = #{isEdit,jdbcType=BIT},
      is_flow = #{isFlow,jdbcType=BIT},
      sum_longth = #{sumLongth,jdbcType=INTEGER}
    where id = #{id,jdbcType=BIGINT}
  </update>
</mapper>