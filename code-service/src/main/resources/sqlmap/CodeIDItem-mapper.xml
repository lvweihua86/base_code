<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hivescm.codeid.mapper.CodeIDItemMapper">
  <resultMap id="BaseResultMap" type="com.hivescm.codeid.pojo.CodeIDItem">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="code_type" jdbcType="TINYINT" property="codeType" />
    <result column="code_column" jdbcType="VARCHAR" property="codeColumn" />
    <result column="code_longth" jdbcType="TINYINT" property="codeLongth" />
    <result column="sequence" jdbcType="TINYINT" property="sequence" />
    <result column="is_serial" jdbcType="TINYINT" property="isSerial" />
    <result column="serial_type" jdbcType="TINYINT" property="serialType" />
    <result column="fill_pattern" jdbcType="TINYINT" property="fillPattern" />
    <result column="fill_str" jdbcType="CHAR" property="fillStr" />
    <result column="code_id" jdbcType="BIGINT" property="codeId" />
  </resultMap>

  <sql id="Base_Column_List">
    id, code_type, code_column, code_longth, sequence, is_serial, serial_type,
    fill_pattern,fill_str,code_id
  </sql>
  
  
  <select id="getFlowLengthByCodeId" resultType="int">
        SELECT code_longth FROM base_code_id_item WHERE code_column='流水号' and code_id=#{0}
  </select>

  <select id="geFlowTypeByCodeId" resultType="int">
        SELECT code_type FROM base_code_id_item WHERE code_column='流水号' and code_id=#{0}
  </select>

  <select id="selectByCodeId" resultMap="BaseResultMap">
     SELECT
       <include refid="Base_Column_List"/>
     FROM
        base_code_id_item
     WHERE code_id=#{0} and code_type IN (4,5)
  </select>
  <select id="getFlowColumnByCodeId" resultMap="BaseResultMap">
      SELECT
        <include refid="Base_Column_List"/>
      FROM
        base_code_id_item
      WHERE code_id=#{0} and is_serial=1 order BY sequence ASC
  </select>
  <select id="getCodeIDItemsByCodeId" resultMap="BaseResultMap">
      SELECT
         <include refid="Base_Column_List"/>
      FROM
         base_code_id_item
      WHERE code_id=#{0} order BY sequence ASC
  </select>

  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select 
      <include refid="Base_Column_List" />
    from
      base_code_id_item
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from base_code_id_item
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.hivescm.codeid.pojo.CodeIDItem">
    insert into base_code_id_item (id, code_type, code_column, 
      code_longth, sequence, is_serial, 
      fill_pattern, fill_str, code_id)
    values (#{id,jdbcType=BIGINT}, #{codeType,jdbcType=BIT}, #{codeColumn,jdbcType=VARCHAR}, 
      #{codeLongth,jdbcType=BIT}, #{sequence,jdbcType=BIT}, #{isSerial,jdbcType=BIT}, 
      #{fillPattern,jdbcType=BIT}, #{fillStr,jdbcType=CHAR}, #{codeId,jdbcType=BIGINT})
  </insert>
  <insert id="insertSelective" parameterType="com.hivescm.codeid.pojo.CodeIDItem">
    insert into base_code_id_item
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="codeType != null">
        code_type,
      </if>
      <if test="codeColumn != null">
        code_column,
      </if>
      <if test="codeLongth != null">
        code_longth,
      </if>
      <if test="sequence != null">
        sequence,
      </if>
      <if test="isSerial != null">
        is_serial,
      </if>
      <if test="fillPattern != null">
        fill_pattern,
      </if>
      <if test="fillStr != null">
        fill_str,
      </if>
      <if test="codeId != null">
        code_id
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="codeType != null">
        #{codeType,jdbcType=BIT},
      </if>
      <if test="codeColumn != null">
        #{codeColumn,jdbcType=VARCHAR},
      </if>
      <if test="codeLongth != null">
        #{codeLongth,jdbcType=BIT},
      </if>
      <if test="sequence != null">
        #{sequence,jdbcType=BIT},
      </if>
      <if test="isSerial != null">
        #{isSerial,jdbcType=BIT},
      </if>
      <if test="fillPattern != null">
        #{fillPattern,jdbcType=BIT},
      </if>
      <if test="fillStr != null">
        #{fillStr,jdbcType=CHAR},
      </if>
      <if test="codeId != null">
        #{codeId,jdbcType=BIGINT}
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.hivescm.codeid.pojo.CodeIDItem">
    update base_code_id_item
    <set>
      <if test="codeType != null">
        code_type = #{codeType,jdbcType=BIT},
      </if>
      <if test="codeColumn != null">
        code_column = #{codeColumn,jdbcType=VARCHAR},
      </if>
      <if test="codeLongth != null">
        code_longth = #{codeLongth,jdbcType=BIT},
      </if>
      <if test="sequence != null">
        sequence = #{sequence,jdbcType=BIT},
      </if>
      <if test="isSerial != null">
        is_serial = #{isSerial,jdbcType=BIT},
      </if>
      <if test="fillPattern != null">
        fill_pattern = #{fillPattern,jdbcType=BIT},
      </if>
      <if test="fillStr != null">
        fill_str = #{fillStr,jdbcType=CHAR},
      </if>
      <if test="codeId != null">
        code_id = #{codeId,jdbcType=BIGINT}
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.hivescm.codeid.pojo.CodeIDItem">
    update base_code_id_item
    set code_type = #{codeType,jdbcType=BIT},
      code_column = #{codeColumn,jdbcType=VARCHAR},
      code_longth = #{codeLongth,jdbcType=BIT},
      sequence = #{sequence,jdbcType=BIT},
      is_serial = #{isSerial,jdbcType=BIT},
      fill_pattern = #{fillPattern,jdbcType=BIT},
      fill_str = #{fillStr,jdbcType=CHAR},
      code_id = #{codeId,jdbcType=BIGINT}
    where id = #{id,jdbcType=BIGINT}
  </update>
</mapper>